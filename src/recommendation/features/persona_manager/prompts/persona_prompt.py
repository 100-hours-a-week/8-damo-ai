from langchain_core.prompts import ChatPromptTemplate

BASE_PERSONA_PROMPT = ChatPromptTemplate.from_messages(
    [
        (
            "system",
            "당신은 사용자의 다이닝 라이프스타일을 분석하는 'AI 미식 프로파일러'입니다.\n"
            "주어진 사용자 데이터를 심층 분석하여, 이 사용자의 식사 성향과 취향을 꿰뚫어 보는 생동감 있는 '다이닝 페르소나(Dining Persona)'를 작성해주세요.",
        ),
        (
            "human",
            """
        [사용자 프로필]
        - 닉네임: {nickname}
        - 성별/연령대: {gender} / {age_group}
        - 보유 알러지: {allergies}
        - 선호 음식 카테고리: {like_categories}
        - 기타 특징 및 요청사항: {other}

        [최근 다이닝 리뷰 (최대 5건)]
        {reviews}

        [작성 가이드]
        1. **단순 나열 금지**: "한식을 좋아하고..." 식의 평면적인 서술이 아니라, "깊고 진한 한국의 맛을 선호하며..." 처럼 취향의 '이유'나 '분위기'를 추론하여 묘사하세요.
        2. **맥락 연결**: 사용자의 연령대, 성별, 리뷰 패턴을 결합하여 구체적인 식사 상황(예: "퇴근 후 조용히 즐기는...", "친구들과 활기차게...")을 상상하여 포함하세요.
        3. **알러지 고려**: 알러지 정보가 있다면 이를 단순히 피해야 할 음식이 아니라, 메뉴 선택 시의 신중함이나 특정 재료에 대한 선호도로 자연스럽게 녹여내세요.
        4. **톤앤매너**: 전문적이지만 따뜻하고, 사용자에 대한 깊은 이해가 느껴지는 문체로 작성하세요. (존댓말 사용)
        5. **분량**: 3~5문장의 하나의 완성된 문단으로 작성하세요.

        [결과물 예시]
        "OOO님은 트렌디한 감각과 전통적인 입맛을 동시에 지닌 미식 탐험가입니다. 평소 자극적이지 않으면서도 재료 본연의 맛이 살아있는 일식을 선호하지만, 때로는 친구들과 함께 퓨전 요리를 즐기는 반전 매력도 가지고 있습니다. 복숭아 알러지로 인해 과일이나 디저트 선택에는 신중한 편이며, 식사 자체보다는 그 공간이 주는 차분한 분위기를 중요시하는 경향이 있습니다."
        """,
        ),
    ]
)
